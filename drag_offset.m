function drag_offset(data1_x,data1_,data2_x,data2_y)  % test gui function  fig = figure;  kids = plot(data1_x,data1_,data2_x,data2_y);  data.kids = kids;  data.depth_offsets = [ ];  data  data.kids  set(gca,'userdata',data);  % set the figure's WindowButtonDownFcn  set(gcf,'WindowButtonDownFcn',{@wbd});function wbd(h,evd)%  disp('down')%  disp(get(gcf,'selectiontype')); % get the values and store them in the figure's appdata props.WindowButtonMotionFcn = get(h,'WindowButtonMotionFcn'); props.WindowButtonUpFcn = get(h,'WindowButtonUpFcn'); setappdata(h,'TestGuiCallbacks',props); % set the new values for the WindowButtonMotionFcn and % WindowButtonUpFcn set(h,'WindowButtonMotionFcn',{@wbm}) set(h,'WindowButtonUpFcn',{@wbu}) % might need to put here some code to figure out what you clicked on start_point= get(gca,'Currentpoint'); start_x = start_point(1,1); start_y = start_point(1,2); data = get(gca,'userdata'); data.start_x = start_x; data.start_y = start_y; data.orig_x = start_x; data.orig_y = start_y; set(gca,'userdata',data,'ylimmode','man','xlimmode','man');function wbm(h,evd) % executes while the mouse moves data = get(gca,'userdata'); x_points = get(data.kids(2),'xdata'); y_points = get(data.kids(2),'ydata'); current_point = get(gca,'currentpoint'); % code here to change the x,y loc of the thing you're dragging x_points = x_points - (data.start_x - current_point(1,1)); y_points = y_points - (data.start_y - current_point(1,2)); set(data.kids(2),'xdata',x_points); set(data.kids(2),'ydata',y_points); data.start_x = current_point(1,1); data.start_y = current_point(1,2); set(gca,'userdata',data);function wbu(h,evd) % executes when the mouse button is released%  disp('up') current_point = get(gca,'currentpoint'); data = get(gca,'userdata'); final_x = current_point(1,1); final_y = current_point(1,2); %  input = [data.orig_x data.orig_y;final_x final_y]; data.depth_offsets = data.orig_x - final_x; data.depths = data.orig_y;  set(gca,'userdata',data); % get the properties and restore them props = getappdata(h,'TestGuiCallbacks'); set(h,props); 